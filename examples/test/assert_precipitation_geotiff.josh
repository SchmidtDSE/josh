start unit mm

  alias millimeters
  alias millimeter

  m = current / 1000

end unit

start simulation AssertPrecipitationGeotiff

  # Same bounds as grass_shrub_fire example
  grid.size = 1 degrees
  grid.low = 30 degrees latitude, -125 degrees longitude
  grid.high = 40 degrees latitude, -115 degrees longitude

  steps.low = 0 count
  steps.high = 8 count  # Testing first 9 timesteps (2008-2016 mapped to 0-8)

  startYear.init = 2025
  year.init = startYear
  year.step = prior.year + 1

  # Assert that max precipitation across all patches is reasonable
  maxPrecip.step = query(Default.precipValue) max
  assert.precipReasonable.step = maxPrecip > 0 mm and maxPrecip < 5000 mm

end simulation

start patch Default

  precipValue.step = external precipitation
  
  # Assert precipitation is non-zero and reasonable
  assert.precipNonZero.step = external precipitation > 0 mm
  assert.precipNotTooHigh.step = external precipitation < 5000 mm

end patch